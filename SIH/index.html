<!DOCTYPE html>
<html>

<head>
    <title>Tourist Authority of India</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
</head>
<style>
    body {
        background-color: white;
    }

    :root {
        --sidebar-width: 250px;
        --primary-dark: #1e293b;
        --secondary-dark: #334155;
        --text-light: #f8fafc;
        --accent-blue: #3b82f6;
        --danger-red: #ef4444;
        --warning-yellow: #f59e0b;
        --success-green: #10b981;
    }

    .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        width: var(--sidebar-width);
        background: linear-gradient(180deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
        color: var(--text-light);
        z-index: 1000;
        transition: transform 0.3s ease;
    }

    .sidebar-header {
        padding: 20px;
        text-align: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .sidebar-header h4 {
        margin: 0;
        font-weight: 300;
        color: var(--accent-blue);
    }

    .sidebar-nav {
        padding: 0;
        margin: 0;
        list-style: none;
    }

    .sidebar-nav li {
        margin: 5px 0;
    }

    .sidebar-nav a {
        display: flex;
        align-items: center;
        padding: 15px 20px;
        color: var(--text-light);
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .sidebar-nav a:hover,
    .sidebar-nav a.active {
        background-color: rgba(59, 130, 246, 0.2);
        color: var(--accent-blue);
        border-right: 3px solid var(--accent-blue);
    }

    .sidebar-nav i {
        margin-right: 10px;
        width: 20px;
        text-align: center;
    }

    .main-content {
        margin-left: var(--sidebar-width);
        padding: 20px;
        min-height: 100vh;
        background-color: #f1f5f9;
    }
    .top-navbar {
            background: white;
            padding: 15px 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid #e2e8f0;
        }

    .profile-dropdown {
        position: relative;
        display: inline-block;
    }

    .profile-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--accent-blue), var(--primary-dark));
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border: 2px solid #e2e8f0;
        transition: all 0.3s ease;
    }

    .profile-avatar:hover {
        border-color: var(--accent-blue);
        transform: scale(1.05);
    }

    .dropdown-menu {
        position: absolute;
        top: 100%;
        right: 0;
        background: white;
        min-width: 200px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        border-radius: 8px;
        border: 1px solid #e2e8f0;
        z-index: 1001;
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.3s ease;
    }

    .dropdown-menu.show {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .dropdown-item {
        display: flex;
        align-items: center;
        padding: 12px 16px;
        color: #334155;
        text-decoration: none;
        transition: background-color 0.2s ease;
        border-bottom: 1px solid #f1f5f9;
    }

    .dropdown-item:last-child {
        border-bottom: none;
    }

    .dropdown-item:hover {
        background-color: #f8fafc;
        color: var(--accent-blue);
    }

    .dropdown-item i {
        margin-right: 10px;
        width: 16px;
        text-align: center;
    }

    .dropdown-item.danger:hover {
        background-color: #fef2f2;
        color: var(--danger-red);
    }

    /* Dashboard Cards Styles */
    .dashboard-cards {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 15px;
        margin: 20px 0;
    }

    @media (max-width: 1400px) {
        .dashboard-cards {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    @media (max-width: 1200px) {
        .dashboard-cards {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 768px) {
        .dashboard-cards {
            grid-template-columns: 1fr;
        }
    }

    .dashboard-card {
        background: white;
        border-radius: 8px;
        padding: 16px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        border: 1px solid #e2e8f0;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        min-height: 120px;
    }

    .dashboard-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 12px;
    }

    .card-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        color: white;
    }

    .card-icon.tourists {
        background: linear-gradient(135deg, var(--accent-blue), #1e40af);
    }

    .card-icon.alerts {
        background: linear-gradient(135deg, var(--danger-red), #dc2626);
    }

    .card-icon.resolved {
        background: linear-gradient(135deg, var(--success-green), #059669);
    }

    .card-icon.risk-zones {
        background: linear-gradient(135deg, var(--warning-yellow), #d97706);
    }

    .card-icon.digital-ids {
        background: linear-gradient(135deg, #8b5cf6, #7c3aed);
    }

    /* Tourist Search Section Styles */
    .search-section {
        background: white;
        border-radius: 12px;
        padding: 24px;
        margin: 30px 0;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        border: 1px solid #e2e8f0;
    }

    .search-header {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
    }

    .search-icon {
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, var(--accent-blue), #1e40af);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 16px;
    }

    .search-icon i {
        color: white;
        font-size: 20px;
    }

    .search-title {
        font-size: 20px;
        font-weight: 700;
        color: var(--primary-dark);
        margin: 0;
    }

    .search-subtitle {
        font-size: 14px;
        color: #64748b;
        margin: 4px 0 0 0;
    }

    .search-form {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 12px;
        align-items: end;
    }

    .search-input-group {
        display: flex;
        gap: 12px;
    }

    .search-input {
        flex: 1;
        padding: 12px 16px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 14px;
        transition: border-color 0.3s ease;
    }

    .search-input:focus {
        outline: none;
        border-color: var(--accent-blue);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .search-select {
        min-width: 140px;
        padding: 12px 16px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 14px;
        background: white;
        cursor: pointer;
        transition: border-color 0.3s ease;
    }

    .search-select:focus {
        outline: none;
        border-color: var(--accent-blue);
    }

    .search-btn {
        padding: 12px 24px;
        background: linear-gradient(135deg, var(--accent-blue), #1e40af);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .search-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }

    .search-results {
        margin-top: 20px;
        padding: 16px;
        background: #f8fafc;
        border-radius: 8px;
        border: 1px solid #e2e8f0;
        display: none;
    }

    .search-results.show {
        display: block;
    }

    .result-card {
        background: white;
        padding: 16px;
        border-radius: 8px;
        border: 1px solid #e2e8f0;
        margin-bottom: 12px;
    }

    .result-header {
        display: flex;
        justify-content: between;
        align-items: center;
        margin-bottom: 12px;
    }

    .result-name {
        font-size: 16px;
        font-weight: 600;
        color: var(--primary-dark);
    }

    .result-status {
        padding: 4px 8px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
    }

    .result-status.active {
        background: rgba(16, 185, 129, 0.1);
        color: var(--success-green);
    }

    .result-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 12px;
        font-size: 14px;
    }

    .result-field {
        display: flex;
        flex-direction: column;
    }

    .result-label {
        font-weight: 600;
        color: #64748b;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .result-value {
        color: var(--primary-dark);
        margin-top: 2px;
    }

    @media (max-width: 768px) {
        .search-form {
            grid-template-columns: 1fr;
        }
        
        .search-input-group {
            flex-direction: column;
        }
        
        .search-select {
            min-width: auto;
        }
    }

    .card-title {
        font-size: 12px;
        font-weight: 600;
        color: #64748b;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin: 0;
    }

    .card-value {
        font-size: 24px;
        font-weight: 700;
        color: var(--primary-dark);
        margin: 4px 0;
        line-height: 1;
    }

    .card-description {
        font-size: 12px;
        color: #64748b;
        margin: 0;
        line-height: 1.3;
    }

    .card-trend {
        position: absolute;
        top: 12px;
        right: 12px;
        background: rgba(16, 185, 129, 0.1);
        color: var(--success-green);
        padding: 2px 6px;
        border-radius: 12px;
        font-size: 10px;
        font-weight: 600;
    }

    .card-trend.down {
        background: rgba(239, 68, 68, 0.1);
        color: var(--danger-red);
    }

    .alert-severity {
        display: flex;
        gap: 8px;
        margin-top: 6px;
    }

    .severity-item {
        display: flex;
        align-items: center;
        gap: 3px;
        font-size: 10px;
        font-weight: 600;
    }

    .severity-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
    }

    .severity-dot.critical {
        background-color: var(--danger-red);
    }

    .severity-dot.medium {
        background-color: var(--warning-yellow);
    }

    /* Interactive Map Panel Styles */
    .map-panel {
        background: white;
        border-radius: 12px;
        padding: 24px;
        margin: 30px 0;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        border: 1px solid #e2e8f0;
    }

    .map-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
    }

    .map-title-section {
        display: flex;
        align-items: center;
    }

    .map-icon {
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, var(--accent-blue), #1e40af);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 16px;
    }

    .map-icon i {
        color: white;
        font-size: 20px;
    }

    .map-title {
        font-size: 20px;
        font-weight: 700;
        color: var(--primary-dark);
        margin: 0;
    }

    .map-subtitle {
        font-size: 14px;
        color: #64748b;
        margin: 4px 0 0 0;
    }

    .map-controls {
        display: flex;
        gap: 12px;
        align-items: center;
    }

    .map-toggle {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .map-toggle.active {
        background: var(--accent-blue);
        color: white;
        border-color: var(--accent-blue);
    }

    .map-toggle input[type="checkbox"] {
        margin: 0;
    }

    .map-container {
        width: 100%;
        height: 500px;
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #e2e8f0;
        position: relative;
    }

    #indiaMap {
        width: 100%;
        height: 100%;
        z-index: 1;
    }

    .map-legend {
        position: absolute;
        top: 10px;
        right: 10px;
        background: white;
        padding: 12px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        min-width: 150px;
    }

    .legend-title {
        font-size: 12px;
        font-weight: 600;
        color: var(--primary-dark);
        margin-bottom: 8px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .legend-item {
        display: flex;
        align-items: center;
        margin-bottom: 6px;
        font-size: 12px;
    }

    .legend-color {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 8px;
    }

    .legend-color.tourists {
        background: var(--accent-blue);
    }

    .legend-color.unsafe {
        background: var(--danger-red);
    }

    .legend-color.safe {
        background: var(--success-green);
    }

    .legend-color.moderate {
        background: var(--warning-yellow);
    }

    /* Custom Leaflet Popup Styles */
    .custom-popup {
        font-family: inherit;
    }

    .popup-header {
        font-weight: 600;
        color: var(--primary-dark);
        margin-bottom: 8px;
        font-size: 14px;
    }

    .popup-content {
        font-size: 12px;
        color: #64748b;
        line-height: 1.4;
    }

    .popup-content div {
        margin-bottom: 4px;
    }
       
</style>

<body>
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-shield-alt fa-2x mb-2"></i>
            <h4 data-en="Police & Tourism" data-hi="पुलिस और पर्यटन">Tourism Authority of India</h4>
            <small data-en="Authority Dashboard" data-hi="प्राधिकरण डैशबोर्ड">Authority Dashboard</small>
        </div>
        <ul class="sidebar-nav">
            <li><a href="#" class="nav-link active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span data-en="Dashboard" data-hi="डैशबोर्ड">Dashboard</span>
                </a></li>
            <li><a href="alert.html" class="nav-link" data-section="alerts">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span data-en="Alerts" data-hi="अलर्ट">Alerts</span>
                </a></li>
            <li><a href="tourist.html" class="nav-link" data-section="tourists">
                    <i class="fas fa-users"></i>
                    <span data-en="Tourists" data-hi="पर्यटक">Tourists</span>
                </a></li>
            <li><a href="reports.html" class="nav-link" data-section="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span data-en="Reports" data-hi="रिपोर्ट्स">Reports</span>
                </a></li>
            <li><a href="#" class="nav-link" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span data-en="Settings" data-hi="सेटिंग्स">Settings</span>
                </a></li>
        </ul>
    </nav>

    <div class="main-content">
    <nav class="navbar navbar-light bg-light">
        <div class="container-fluid">
            <form class="d-flex me-auto">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
            
            <!-- Profile Dropdown -->
            <div class="profile-dropdown">
                <div class="profile-avatar" onclick="toggleProfileDropdown()">
                    <i class="fas fa-user"></i>
                </div>
                <div class="dropdown-menu" id="profileDropdown">
                    <a href="#" class="dropdown-item">
                        <i class="fas fa-user-circle"></i>
                        <span>Profile</span>
                    </a>
                    <a href="#" class="dropdown-item">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                    <a href="#" class="dropdown-item">
                        <i class="fas fa-question-circle"></i>
                        <span>Help</span>
                    </a>
                    <a href="#" class="dropdown-item danger" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Dashboard Cards Section -->
    <div class="dashboard-cards">
        <!-- Active Tourists Card -->
        <div class="dashboard-card">
            <div class="card-header">
                <div class="card-icon tourists">
                    <i class="fas fa-users"></i>
                </div>
                <div class="card-trend">+12%</div>
            </div>
            <h3 class="card-title">Active Tourists</h3>
            <div class="card-value">3,256</div>
            <p class="card-description">Tourists currently being tracked today</p>
        </div>

        <!-- Active Alerts Card -->
        <div class="dashboard-card">
            <div class="card-header">
                <div class="card-icon alerts">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="card-trend down">+3</div>
            </div>
            <h3 class="card-title">Active Alerts</h3>
            <div class="card-value">20</div>
            <p class="card-description">Ongoing alerts requiring attention</p>
            <div class="alert-severity">
                <div class="severity-item">
                    <div class="severity-dot critical"></div>
                    <span>12 Critical</span>
                </div>
                <div class="severity-item">
                    <div class="severity-dot medium"></div>
                    <span>8 Medium</span>
                </div>
            </div>
        </div>

        <!-- Resolved Incidents Card -->
        <div class="dashboard-card">
            <div class="card-header">
                <div class="card-icon resolved">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="card-trend">+8%</div>
            </div>
            <h3 class="card-title">Resolved Incidents</h3>
            <div class="card-value">56</div>
            <p class="card-description">Incidents resolved this week</p>
        </div>

        <!-- High-Risk Zones Card -->
        <div class="dashboard-card">
            <div class="card-header">
                <div class="card-icon risk-zones">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="card-trend down">+2</div>
            </div>
            <h3 class="card-title">High-Risk Zones</h3>
            <div class="card-value">5</div>
            <p class="card-description">Unsafe zones identified today</p>
        </div>

        <!-- Digital IDs Issued Card -->
        <div class="dashboard-card">
            <div class="card-header">
                <div class="card-icon digital-ids">
                    <i class="fas fa-id-card"></i>
                </div>
                <div class="card-trend">+15%</div>
            </div>
            <h3 class="card-title">Digital IDs Issued</h3>
            <div class="card-value">142</div>
            <p class="card-description">Digital IDs issued today</p>
        </div>
    </div>

    <!-- Interactive Map Panel -->
    <div class="map-panel">
        <div class="map-header">
            <div class="map-title-section">
                <div class="map-icon">
                    <i class="fas fa-map-marked-alt"></i>
                </div>
                <div>
                    <h2 class="map-title">Real-Time Tourist & Safety Map</h2>
                    <p class="map-subtitle">Live tracking of tourist clusters and safety zones across India</p>
                </div>
            </div>
            <div class="map-controls">
                <label class="map-toggle" id="touristToggle">
                    <input type="checkbox" checked onchange="toggleTourists()">
                    <span>Tourist Clusters</span>
                </label>
                <label class="map-toggle" id="safetyToggle">
                    <input type="checkbox" checked onchange="toggleSafetyZones()">
                    <span>Safety Zones</span>
                </label>
            </div>
        </div>
        
        <div class="map-container">
            <div id="indiaMap">
                <div style="display: flex; align-items: center; justify-content: center; height: 100%; background: #f8fafc; color: #64748b; font-size: 16px;">
                    <div style="text-align: center;">
                        <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 10px;"></i>
                        <div>Loading Interactive Map...</div>
                    </div>
                </div>
            </div>
            <div class="map-legend">
                <div class="legend-title">Map Legend</div>
                <div class="legend-item">
                    <div class="legend-color tourists"></div>
                    <span>Tourist Clusters</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color safe"></div>
                    <span>Safe Zones</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color moderate"></div>
                    <span>Moderate Risk</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color unsafe"></div>
                    <span>Unsafe Zones</span>
                </div>
            </div>
        </div>
    </div>

    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script>
    // Profile dropdown functionality
    function toggleProfileDropdown() {
        const dropdown = document.getElementById('profileDropdown');
        dropdown.classList.toggle('show');
    }

    // Close dropdown when clicking outside
    document.addEventListener('click', function(event) {
        const dropdown = document.getElementById('profileDropdown');
        const avatar = document.querySelector('.profile-avatar');
        
        if (!avatar.contains(event.target) && !dropdown.contains(event.target)) {
            dropdown.classList.remove('show');
        }
    });

    // Logout functionality
    function logout() {
        if (confirm('Are you sure you want to logout?')) {
            // Add your logout logic here
            alert('Logged out successfully!');
            // Redirect to login page or perform logout action
            // window.location.href = 'login.html';
        }
    }

    // Map functionality
    let map;
    let touristMarkers = [];
    let safetyZones = [];
    let showTourists = true;
    let showSafety = true;

    // Initialize map when page loads
    document.addEventListener('DOMContentLoaded', function() {
        // Add a small delay to ensure DOM is fully ready
        setTimeout(() => {
            initializeMap();
        }, 100);
    });

    function initializeMap() {
        try {
            // Check if Leaflet is loaded
            if (typeof L === 'undefined') {
                console.error('Leaflet library not loaded');
                return;
            }

            // Get the map container
            const mapContainer = document.getElementById('indiaMap');
            if (!mapContainer) {
                console.error('Map container not found');
                return;
            }

            // Clear loading message
            mapContainer.innerHTML = '';

            // Initialize the map centered on India
            map = L.map('indiaMap', {
                center: [20.5937, 78.9629],
                zoom: 5,
                zoomControl: true,
                scrollWheelZoom: true
            });

            // Add OpenStreetMap tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors',
                maxZoom: 18,
                minZoom: 4
            }).addTo(map);

            // Force map to invalidate size after a short delay
            setTimeout(() => {
                map.invalidateSize();
            }, 100);

            // Add tourist clusters and safety zones
            addTouristClusters();
            addSafetyZones();

            console.log('Map initialized successfully');
        } catch (error) {
            console.error('Error initializing map:', error);
        }
    }

    function addTouristClusters() {
        // Sample tourist cluster data for major Indian tourist destinations
        const touristData = [
            { lat: 27.1751, lng: 78.0421, name: "Taj Mahal, Agra", tourists: 1250, details: "High tourist density<br>Active monitoring: 24/7<br>Emergency contacts: 3" },
            { lat: 28.6129, lng: 77.2295, name: "Red Fort, Delhi", tourists: 890, details: "Moderate tourist density<br>Active monitoring: Peak hours<br>Emergency contacts: 2" },
            { lat: 19.0760, lng: 72.8777, name: "Gateway of India, Mumbai", tourists: 750, details: "High tourist density<br>Active monitoring: 24/7<br>Emergency contacts: 4" },
            { lat: 26.9124, lng: 70.9083, name: "Jaisalmer Fort", tourists: 320, details: "Moderate tourist density<br>Active monitoring: Day time<br>Emergency contacts: 2" },
            { lat: 15.2993, lng: 74.1240, name: "Beaches of Goa", tourists: 920, details: "High tourist density<br>Active monitoring: 24/7<br>Emergency contacts: 3" },
            { lat: 11.2588, lng: 75.7804, name: "Calicut, Kerala", tourists: 280, details: "Low tourist density<br>Active monitoring: Peak hours<br>Emergency contacts: 1" },
            { lat: 12.9716, lng: 77.5946, name: "Bangalore Palace", tourists: 450, details: "Moderate tourist density<br>Active monitoring: Day time<br>Emergency contacts: 2" },
            { lat: 22.9734, lng: 78.6569, name: "Khajuraho Temples", tourists: 180, details: "Low tourist density<br>Active monitoring: Day time<br>Emergency contacts: 1" }
        ];

        touristData.forEach(location => {
            // Determine marker size based on tourist count
            let radius = Math.max(8, Math.min(20, location.tourists / 50));
            
            const marker = L.circleMarker([location.lat, location.lng], {
                radius: radius,
                fillColor: '#3b82f6',
                color: '#1e40af',
                weight: 2,
                opacity: 0.8,
                fillOpacity: 0.6
            }).addTo(map);

            // Add popup with tourist information
            marker.bindPopup(`
                <div class="custom-popup">
                    <div class="popup-header">${location.name}</div>
                    <div class="popup-content">
                        <div><strong>Active Tourists:</strong> ${location.tourists}</div>
                        <div>${location.details}</div>
                    </div>
                </div>
            `);

            touristMarkers.push(marker);
        });
    }

    function addSafetyZones() {
        // Sample safety zone data
        const safetyData = [
            { lat: 28.5562, lng: 77.1000, name: "Connaught Place Area", type: "unsafe", radius: 2000, details: "High crime reported<br>Increased patrol units<br>Avoid after 10 PM" },
            { lat: 19.0728, lng: 72.8826, name: "Colaba District", type: "safe", radius: 1500, details: "Well-patrolled area<br>Tourist police station<br>24/7 monitoring" },
            { lat: 27.1767, lng: 78.0081, name: "Agra Fort Area", type: "safe", radius: 1000, details: "Heritage protection zone<br>Regular patrols<br>Tourist assistance" },
            { lat: 15.5557, lng: 73.8157, name: "North Goa Beaches", type: "moderate", radius: 3000, details: "Moderate safety<br>Beach patrol active<br>Evening caution advised" },
            { lat: 26.9260, lng: 70.8849, name: "Jaisalmer Old City", type: "moderate", radius: 800, details: "Narrow streets<br>Guide recommended<br>Day visits preferred" },
            { lat: 28.6542, lng: 77.2373, name: "Chandni Chowk", type: "unsafe", radius: 1200, details: "Crowded market area<br>Pickpocket reports<br>Stay vigilant" }
        ];

        safetyData.forEach(zone => {
            let color, fillColor;
            switch(zone.type) {
                case 'safe':
                    color = '#10b981';
                    fillColor = '#10b981';
                    break;
                case 'moderate':
                    color = '#f59e0b';
                    fillColor = '#f59e0b';
                    break;
                case 'unsafe':
                    color = '#ef4444';
                    fillColor = '#ef4444';
                    break;
            }

            const circle = L.circle([zone.lat, zone.lng], {
                radius: zone.radius,
                color: color,
                weight: 2,
                opacity: 0.7,
                fillColor: fillColor,
                fillOpacity: 0.2
            }).addTo(map);

            // Add popup with safety information
            circle.bindPopup(`
                <div class="custom-popup">
                    <div class="popup-header">${zone.name}</div>
                    <div class="popup-content">
                        <div><strong>Safety Level:</strong> ${zone.type.charAt(0).toUpperCase() + zone.type.slice(1)}</div>
                        <div>${zone.details}</div>
                    </div>
                </div>
            `);

            safetyZones.push(circle);
        });
    }

    function toggleTourists() {
        showTourists = !showTourists;
        const toggle = document.getElementById('touristToggle');
        
        if (showTourists) {
            toggle.classList.add('active');
            touristMarkers.forEach(marker => map.addLayer(marker));
        } else {
            toggle.classList.remove('active');
            touristMarkers.forEach(marker => map.removeLayer(marker));
        }
    }

    function toggleSafetyZones() {
        showSafety = !showSafety;
        const toggle = document.getElementById('safetyToggle');
        
        if (showSafety) {
            toggle.classList.add('active');
            safetyZones.forEach(zone => map.addLayer(zone));
        } else {
            toggle.classList.remove('active');
            safetyZones.forEach(zone => map.removeLayer(zone));
        }
    }
</script>
</body>

</html>